---
import Titulo from '@components/atoms/Titulo.astro';
import Titulo from '@components/atoms/Titulo.astro';
import { FeaturedCourses } from '@components/organisms/FeaturedCourses';
import { clientGql } from '@graphql-astro/apolloClient';
import { CursosDocument, type Curso } from '@graphql-astro/generated/graphql';
export const prerender = true;

const { data } = await clientGql.query({
    query: CursosDocument,
    variables: { offset: 0, limit: 5 },
});

const cursos: Curso[] = data?.Cursos || [];
---

<div class="bg-[var(--color-bg)]">

    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <!-- Encabezado de sección mejorado -->
        <div class="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
            <div class="max-w-2xl">
                <span class="inline-block px-4 py-1.5 rounded-full bg-[var(--color-primary)]/10 text-[var(--color-primary)] text-sm font-semibold tracking-wide mb-4">
                    Catálogo Destacado
                </span>
                <h2 class="text-3xl md:text-4xl font-bold text-[var(--color-text)] mb-4">
                    Cursos <span class="text-transparent bg-clip-text bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)]">Recomendados</span>
                </h2>
                <p class="text-lg text-[var(--color-text-muted)]">
                    Descubre los programas más solicitados por la industria y comienza tu especialización hoy mismo.
                </p>
            </div>
            
            <a 
                href="/cursos#catalogo" 
                class="hidden md:inline-flex items-center gap-2 px-8 py-3.5 rounded-full bg-[var(--color-primary)] text-white font-semibold shadow-lg shadow-[var(--color-primary)]/30 hover:shadow-xl hover:shadow-[var(--color-primary)]/40 hover:scale-105 transition-all duration-300 group"
            >
                Explorar todos
                <span class="group-hover:translate-x-1 transition-transform">→</span>
            </a>
        </div>

        {/* Cuadrícula para mostrar los cursos - Hydrated for Currency Support */}
        <FeaturedCourses client:visible initialCourses={cursos} />

        {/* Botón móvil para ver todos (visible solo en móvil) */}
        <div class="mt-12 text-center md:hidden">
            <a 
                href="/cursos#catalogo" 
                class="inline-flex items-center gap-2 px-8 py-3.5 rounded-full bg-[var(--color-surface)] border border-[var(--color-border)] text-[var(--color-text)] font-semibold hover:border-[var(--color-primary)] hover:text-[var(--color-primary)] transition-all duration-300 w-full justify-center"
            >
                Explorar catálogo completo
                <span>→</span>
            </a>
        </div>
    </div>
</div>
