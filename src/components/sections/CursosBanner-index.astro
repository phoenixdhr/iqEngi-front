---
import Titulo from '@components/atoms/Titulo.astro';
import Cards from '@components/molecules/Cards.astro';
import { clientGql } from '@graphql-astro/apolloClient';
import { CursosDocument, type Curso } from '@graphql-astro/generated/graphql';
export const prerender = true;

const { data } = await clientGql.query({
    query: CursosDocument,
    variables: { offset: 0, limit: 5 },
});

const cursos: Curso[] = data?.Cursos || [];
---

<div class="bg-[var(--color-bg)]">

    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <!-- Encabezado de secci√≥n mejorado -->
        <div class="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
            <div class="max-w-2xl">
                <span class="inline-block px-4 py-1.5 rounded-full bg-[var(--color-primary)]/10 text-[var(--color-primary)] text-sm font-semibold tracking-wide mb-4">
                    Cat√°logo Destacado
                </span>
                <h2 class="text-3xl md:text-4xl font-bold text-[var(--color-text)] mb-4">
                    Cursos <span class="text-transparent bg-clip-text bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)]">Recomendados</span>
                </h2>
                <p class="text-lg text-[var(--color-text-muted)]">
                    Descubre los programas m√°s solicitados por la industria y comienza tu especializaci√≥n hoy mismo.
                </p>
            </div>
            
            <a 
                href="/cursos#catalogo" 
                class="hidden md:inline-flex items-center gap-2 px-8 py-3.5 rounded-full bg-[var(--color-primary)] text-white font-semibold shadow-lg shadow-[var(--color-primary)]/30 hover:shadow-xl hover:shadow-[var(--color-primary)]/40 hover:scale-105 transition-all duration-300 group"
            >
                Explorar todos
                <span class="group-hover:translate-x-1 transition-transform">‚Üí</span>
            </a>
        </div>

        {/* Cuadr√≠cula para mostrar los cursos */}
        <div class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3">
            {
                cursos.map((curso, index) => {
                    return <Cards {...curso} isBig={false} />;
                })
            }
            
            {/* Card "Ver m√°s cursos" que ocupa el 6to lugar */}
            <a href="/cursos#catalogo" class="group relative flex flex-col items-center justify-center p-8 h-full min-h-[400px] rounded-2xl border-2 border-dashed border-[var(--color-border)] hover:border-[var(--color-primary)] bg-[var(--color-surface)]/50 hover:bg-[var(--color-surface)] transition-all duration-300 cursor-pointer text-center">
                <div class="w-20 h-20 rounded-full bg-[var(--color-surface-2)] group-hover:bg-[var(--color-primary)]/10 flex items-center justify-center mb-6 transition-colors duration-300">
                    <span class="text-4xl group-hover:scale-110 transition-transform duration-300">üöÄ</span>
                </div>
                <h3 class="text-xl font-bold text-[var(--color-text)] mb-3 group-hover:text-[var(--color-primary)] transition-colors">
                    Explora todo el cat√°logo
                </h3>
                <p class="text-[var(--color-text-muted)] text-sm mb-6 max-w-[200px]">
                    Tenemos muchos m√°s cursos especializados esperando por ti.
                </p>
                <span class="inline-flex items-center gap-2 font-semibold text-[var(--color-primary)] group-hover:gap-3 transition-all duration-300">
                    Ver todos los cursos
                    <span>‚Üí</span>
                </span>
            </a>
        </div>

        {/* Bot√≥n m√≥vil para ver todos (visible solo en m√≥vil) */}
        <div class="mt-12 text-center md:hidden">
            <a 
                href="/cursos#catalogo" 
                class="inline-flex items-center gap-2 px-8 py-3.5 rounded-full bg-[var(--color-surface)] border border-[var(--color-border)] text-[var(--color-text)] font-semibold hover:border-[var(--color-primary)] hover:text-[var(--color-primary)] transition-all duration-300 w-full justify-center"
            >
                Explorar cat√°logo completo
                <span>‚Üí</span>
            </a>
        </div>
    </div>
</div>
