---
import type { Categoria } from '@graphql-astro/generated/graphql';

interface Props {
  categorias: Categoria[];
}

const { categorias } = Astro.props;

// Helper to get consistent colors/icons based on category name or index
const getCategoryIcon = (index: number) => {
    const icons = ['‚öôÔ∏è', 'üß™', 'üîí', 'üìä', '‚ö°', 'üèóÔ∏è', 'üìê', 'üì±'];
    return icons[index % icons.length];
};

const getCategoryColor = (index: number) => {
    const colors = ['bg-primary', 'bg-secondary', 'bg-accent', 'bg-info', 'bg-success', 'bg-warning'];
    return colors[index % colors.length];
};
---

<section class="py-16 md:py-24 bg-base-100">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
            <div class="text-center md:text-left">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Explora por Categor√≠as</h2>
                <p class="text-base-content/60 max-w-2xl">
                    Encuentra el camino perfecto para tu desarrollo profesional en nuestras √°reas especializadas.
                </p>
            </div>
        </div>

        {categorias.length > 0 ? (
            <div class="flex flex-wrap justify-center gap-4 md:gap-6">
                {categorias.map((cat, index) => (
                    <a 
                        href={`/cursos?categoria=${cat.nombreCategoria}`}
                        class={`group flex flex-col items-center p-6 bg-base-200/50 hover:bg-base-100 border border-base-200 hover:border-primary/30 rounded-2xl transition-all duration-300 hover:shadow-lg hover:-translate-y-1 text-center h-full ${index >= 3 ? 'hidden md:flex' : 'flex'}`}
                    >
                        <div class={`w-14 h-14 rounded-full ${getCategoryColor(index)}/10 flex items-center justify-center text-2xl mb-4 group-hover:scale-110 transition-transform duration-300`}>
                            {getCategoryIcon(index)}
                        </div>
                        <h3 class="font-semibold text-lg group-hover:text-primary transition-colors">
                            {cat.nombreCategoria}
                        </h3>
                        <p class="text-xs text-base-content/50 mt-1 line-clamp-2">
                            {cat.descripcion || 'Explora cursos en esta √°rea'}
                        </p>
                    </a>
                ))}
                
                {/* Bot√≥n Ver M√°s (visible siempre, completa la grilla en m√≥vil) */}
                <a 
                    href="#catalogo"
                    class="group flex flex-col items-center justify-center p-6 bg-base-200/50 hover:bg-base-100 border border-base-200 hover:border-primary/30 rounded-2xl transition-all duration-300 hover:shadow-lg hover:-translate-y-1 text-center h-full cursor-pointer"
                >
                    <div class="w-14 h-14 rounded-full bg-primary/10 text-primary flex items-center justify-center text-2xl mb-4 group-hover:scale-110 transition-transform duration-300">
                        ‚Üí
                    </div>
                    <h3 class="font-semibold text-lg text-primary group-hover:text-primary transition-colors">
                        Ver m√°s
                    </h3>
                    <p class="text-xs text-base-content/50 mt-1">
                        Explora todas las √°reas
                    </p>
                </a>
            </div>
        ) : (
            <div class="text-center py-10 bg-base-200 rounded-xl">
                <p class="text-base-content/50">Cargando categor√≠as...</p>
            </div>
        )}
    </div>
</section>
